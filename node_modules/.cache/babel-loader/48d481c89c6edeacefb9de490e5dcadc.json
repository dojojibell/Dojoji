{"ast":null,"code":"var _jsxFileName = \"/Users/ivopascoal/Desktop/MAXBID/src/pages/Positions.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { useCallback, useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { withRouter } from 'react-router-dom';\nimport * as ethers from 'ethers';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport InfoIcon from '@material-ui/icons/Info';\nimport moment from 'moment';\nimport uniswap from './uniswap.png';\nimport { useWallet } from 'contexts/wallet';\nimport { useContracts } from 'contexts/contracts';\nimport { useNotifications } from 'contexts/notifications';\nimport { useData } from 'contexts/data';\nimport { formatUnits } from 'utils/big-number';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const useStyles = makeStyles(theme => ({\n  maxButton: {\n    height: 35\n  },\n  depositButtonCell: {\n    width: 110,\n    padding: 5\n  },\n  depositButton: {\n    width: 100\n  }\n}));\n\nconst Stake = ({\n  history\n}) => {\n  _s();\n\n  const classes = useStyles();\n  const {\n    startConnecting: startConnectingWallet,\n    address\n  } = useWallet();\n  const {\n    token0Address,\n    token1Address,\n    token0Symbol,\n    token1Symbol\n  } = useContracts();\n  const {\n    positions,\n    currentIncentiveId,\n    incentives,\n    setCurrentIncentiveId\n  } = useData();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      p: 5,\n      children: !address ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            children: \"$DOJOJI UniswapV3 Liquidity incentive program.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: uniswap,\n            alt: \"cloud\",\n            style: {\n              position: 'absolute',\n              width: '5%',\n              left: '1.5vmin',\n              bottom: '0vmin'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          mt: 2,\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            color: \"secondary\",\n            variant: \"contained\",\n            onClick: startConnectingWallet,\n            children: \"Connect Wallet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            children: [\"You have \", positions.length, \" \", token0Symbol, \"-\", token1Symbol, ' ', \"liquidity positions.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            children: [\"Get \", !positions.length ? 'some' : 'more', \" by providing liquidity to the \", token0Symbol, \"-\", token1Symbol, \" Pool over\", ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n              href: `https://app.uniswap.org/#/add/${[token1Address, token0Address].join('/')}`,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: \"here\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 17\n            }, this), \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          m: 2,\n          mt: 3,\n          className: \"flex flex-grow justify-space\",\n          children: [/*#__PURE__*/_jsxDEV(FormControl, {\n            children: !currentIncentiveId ? null : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                id: \"incentive-label\",\n                shrink: true,\n                children: \"Incentive\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                labelId: \"incentive-label\",\n                id: \"incentive\",\n                value: currentIncentiveId,\n                displayEmpty: true,\n                onChange: e => {\n                  setCurrentIncentiveId(e.target.value);\n                },\n                children: incentives.map(incentive => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: incentive.id,\n                  children: [formatTimestamp(incentive.key.startTime), \" -\", ' ', formatTimestamp(incentive.key.endTime), ' ', incentive.ended ? 'ENDED' : '']\n                }, incentive.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ClaimAvailableReward, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this), !positions.length ? null : /*#__PURE__*/_jsxDEV(Box, {\n          mt: 2,\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            \"aria-label\": \"Loans\",\n            size: 'small',\n            children: [/*#__PURE__*/_jsxDEV(TableHead, {\n              children: /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"ID\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"Rewards\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"right\",\n                  className: classes.depositButtonCell\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"right\",\n                  className: classes.depositButtonCell\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n              children: positions.map(position => /*#__PURE__*/_jsxDEV(LiquidityPositionTableRow, {\n                position,\n                history\n              }, position.tokenId, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(Stake, \"0E3TDW0TB1IrhJf6G1JaTkNkAEs=\", false, function () {\n  return [useStyles, useWallet, useContracts, useData];\n});\n\n_c = Stake;\n\nconst LiquidityPositionTableRow = ({\n  position,\n  history\n}) => {\n  _s2();\n\n  const classes = useStyles();\n  const {\n    address\n  } = useWallet();\n  const {\n    token0Decimals\n  } = useContracts();\n  const stake = useCallback(async () => {\n    history.push(`/stake/${position.tokenId}`);\n  }, [position.tokenId, history]);\n  const unstake = useCallback(async () => {\n    history.push(`/unstake/${position.tokenId}`);\n  }, [position.tokenId, history]);\n  const withdraw = useCallback(async () => {\n    history.push(`/withdraw/${position.tokenId}`);\n  }, [position.tokenId, history]);\n  return /*#__PURE__*/_jsxDEV(TableRow, {\n    children: [/*#__PURE__*/_jsxDEV(TableCell, {\n      component: \"th\",\n      scope: \"row\",\n      children: position.tokenId.toString()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n      children: !position.reward.isZero() ? /*#__PURE__*/_jsxDEV(Box, {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          mr: 1,\n          children: formatUnits(position.reward, token0Decimals)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Unstake position in order to claim accrued rewards.\",\n          arrow: true,\n          placement: \"top\",\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            className: \"flex items-center cursor\",\n            children: /*#__PURE__*/_jsxDEV(InfoIcon, {\n              fontSize: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this) : '-'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n      align: \"right\",\n      className: classes.depositButtonCell,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        color: \"secondary\",\n        variant: \"contained\",\n        onClick: position.staked ? unstake : stake,\n        className: classes.depositButton,\n        children: position.staked ? 'Unstake' : 'Stake'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n      align: \"right\",\n      className: classes.depositButtonCell,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        color: \"secondary\",\n        variant: \"contained\",\n        onClick: withdraw,\n        className: classes.depositButton,\n        disabled: position.owner === address,\n        children: \"Withdraw\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(LiquidityPositionTableRow, \"Q4AFFI9+QBuVJ81Hx0ebnmw5Vcs=\", false, function () {\n  return [useStyles, useWallet, useContracts];\n});\n\n_c2 = LiquidityPositionTableRow;\n\nconst ClaimAvailableReward = () => {\n  _s3();\n\n  const classes = useStyles();\n  const {\n    stakingRewardsContract\n  } = useContracts();\n  const {\n    currentIncentiveRewardTokenSymbol,\n    currentIncentiveRewardTokenDecimals,\n    currentIncentive\n  } = useData();\n  const {\n    address\n  } = useWallet();\n  const {\n    tx\n  } = useNotifications();\n  const [reward, setReward] = useState(ethers.BigNumber.from(0));\n  const [isClaiming, setIsClaiming] = useState(false);\n  useEffect(() => {\n    if (!(stakingRewardsContract && currentIncentive && address)) return;\n    let isMounted = true;\n    const unsubs = [() => {\n      isMounted = false;\n    }];\n\n    const load = async () => {\n      const reward = await stakingRewardsContract.rewards(currentIncentive.key.rewardToken, address);\n      if (isMounted) setReward(reward);\n    };\n\n    const subscribe = () => {\n      const tokenUnstakedEvent = stakingRewardsContract.filters.TokenUnstaked();\n      stakingRewardsContract.on(tokenUnstakedEvent, load);\n      unsubs.push(() => {\n        stakingRewardsContract.off(tokenUnstakedEvent, load);\n      });\n      const rewardClaimedEvent = stakingRewardsContract.filters.RewardClaimed();\n      stakingRewardsContract.on(rewardClaimedEvent, load);\n      unsubs.push(() => {\n        stakingRewardsContract.off(rewardClaimedEvent, load);\n      });\n    };\n\n    load();\n    subscribe();\n    return () => {\n      unsubs.map(u => u());\n    };\n  }, [stakingRewardsContract, currentIncentive, address]);\n\n  const claim = async () => {\n    if (!(stakingRewardsContract && currentIncentive)) return;\n\n    try {\n      setIsClaiming(true);\n      const reward = await stakingRewardsContract.rewards(currentIncentive.key.rewardToken, address);\n      await tx('Claiming...', 'Claimed!', () => stakingRewardsContract.claimReward(currentIncentive.key.rewardToken, address, reward));\n    } catch (e) {\n      console.warn(e);\n    } finally {\n      setIsClaiming(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    className: \"flex items-center\",\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      mr: 1,\n      children: \"REWARDS:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }, this), ' ', /*#__PURE__*/_jsxDEV(Box, {\n      mr: 2,\n      children: [formatUnits(reward, currentIncentiveRewardTokenDecimals), ' ', currentIncentiveRewardTokenSymbol]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      color: \"secondary\",\n      variant: \"contained\",\n      onClick: claim,\n      className: classes.depositButton,\n      disabled: isClaiming || reward.isZero(),\n      children: isClaiming ? 'Claiming...' : 'Claim'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 327,\n    columnNumber: 5\n  }, this);\n};\n\n_s3(ClaimAvailableReward, \"3YuDU+3wHqHFn2340Xr3OCqN1WI=\", false, function () {\n  return [useStyles, useContracts, useData, useWallet, useNotifications];\n});\n\n_c3 = ClaimAvailableReward;\n\nfunction formatTimestamp(unix) {\n  return moment.unix(unix).local().format('YYYY-MM-DD HHmm[h]');\n}\n\nexport default _c4 = withRouter(Stake);\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Stake\");\n$RefreshReg$(_c2, \"LiquidityPositionTableRow\");\n$RefreshReg$(_c3, \"ClaimAvailableReward\");\n$RefreshReg$(_c4, \"%default%\");","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/MAXBID/src/pages/Positions.tsx"],"names":["useCallback","useState","useEffect","makeStyles","withRouter","ethers","Box","Button","Typography","Table","TableHead","TableBody","TableRow","TableCell","Select","MenuItem","InputLabel","FormControl","Tooltip","InfoIcon","moment","uniswap","useWallet","useContracts","useNotifications","useData","formatUnits","useStyles","theme","maxButton","height","depositButtonCell","width","padding","depositButton","Stake","history","classes","startConnecting","startConnectingWallet","address","token0Address","token1Address","token0Symbol","token1Symbol","positions","currentIncentiveId","incentives","setCurrentIncentiveId","position","left","bottom","length","join","e","target","value","map","incentive","id","formatTimestamp","key","startTime","endTime","ended","tokenId","LiquidityPositionTableRow","token0Decimals","stake","push","unstake","withdraw","toString","reward","isZero","staked","owner","ClaimAvailableReward","stakingRewardsContract","currentIncentiveRewardTokenSymbol","currentIncentiveRewardTokenDecimals","currentIncentive","tx","setReward","BigNumber","from","isClaiming","setIsClaiming","isMounted","unsubs","load","rewards","rewardToken","subscribe","tokenUnstakedEvent","filters","TokenUnstaked","on","off","rewardClaimedEvent","RewardClaimed","u","claim","claimReward","console","warn","unix","local","format"],"mappings":"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","sourcesContent":["import { FC, useCallback, useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { withRouter } from 'react-router-dom';\nimport * as ethers from 'ethers';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport InfoIcon from '@material-ui/icons/Info';\nimport moment from 'moment';\nimport uniswap from './uniswap.png';\nimport { useWallet } from 'contexts/wallet';\nimport { useContracts } from 'contexts/contracts';\nimport { useNotifications } from 'contexts/notifications';\nimport { useData } from 'contexts/data';\nimport { LiquidityPosition } from 'utils/types';\nimport { formatUnits } from 'utils/big-number';\n\nexport const useStyles = makeStyles((theme) => ({\n  maxButton: {\n    height: 35,\n  },\n  depositButtonCell: {\n    width: 110,\n    padding: 5,\n  },\n  depositButton: {\n    width: 100,\n  },\n}));\n\nconst Stake: FC<{ history: any }> = ({ history }) => {\n  const classes = useStyles();\n  const { startConnecting: startConnectingWallet, address } = useWallet();\n  const {\n    token0Address,\n    token1Address,\n    token0Symbol,\n    token1Symbol,\n  } = useContracts();\n  const {\n    positions,\n    currentIncentiveId,\n    incentives,\n    setCurrentIncentiveId,\n  } = useData();\n\n  return (\n    <>\n      <Box p={5}>\n        {!address ? (\n          <>\n            <Box>\n              <Typography variant='h5'>\n                $DOJOJI UniswapV3 Liquidity incentive program.\n              </Typography>\n              <img\n                src={uniswap}\n                alt='cloud'\n                style={{\n                  position: 'absolute',\n                  width: '5%',\n                  left: '1.5vmin',\n                  bottom: '0vmin',\n                }}\n              />\n            </Box>\n\n            <Box mt={2}>\n              <Button\n                color='secondary'\n                variant='contained'\n                onClick={startConnectingWallet}\n              >\n                Connect Wallet\n              </Button>\n            </Box>\n          </>\n        ) : (\n          <>\n            <Box>\n              <Typography>\n                You have {positions.length} {token0Symbol}-{token1Symbol}{' '}\n                liquidity positions.\n              </Typography>\n            </Box>\n\n            <Box>\n              <Typography variant='caption'>\n                Get {!positions.length ? 'some' : 'more'} by providing liquidity\n                to the {token0Symbol}-{token1Symbol} Pool over{' '}\n                <a\n                  href={`https://app.uniswap.org/#/add/${[\n                    token1Address,\n                    token0Address,\n                  ].join('/')}`}\n                  target='_blank'\n                  rel='noopener noreferrer'\n                >\n                  here\n                </a>\n                .\n              </Typography>\n            </Box>\n\n            <Box m={2} mt={3} className='flex flex-grow justify-space'>\n              <FormControl>\n                {!currentIncentiveId ? null : (\n                  <>\n                    <InputLabel id='incentive-label' shrink>\n                      Incentive\n                    </InputLabel>\n                    <Select\n                      labelId='incentive-label'\n                      id='incentive'\n                      value={currentIncentiveId}\n                      displayEmpty\n                      onChange={(e) => {\n                        setCurrentIncentiveId(e.target.value as string);\n                      }}\n                    >\n                      {incentives.map((incentive) => (\n                        <MenuItem value={incentive.id} key={incentive.id}>\n                          {formatTimestamp(incentive.key.startTime)} -{' '}\n                          {formatTimestamp(incentive.key.endTime)}{' '}\n                          {incentive.ended ? 'ENDED' : ''}\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </>\n                )}\n              </FormControl>\n\n              <ClaimAvailableReward />\n            </Box>\n\n            {!positions.length ? null : (\n              <Box mt={2}>\n                <Table aria-label='Loans' size={'small'}>\n                  <TableHead>\n                    <TableRow>\n                      <TableCell>ID</TableCell>\n                      <TableCell>Rewards</TableCell>\n                      <TableCell\n                        align='right'\n                        className={classes.depositButtonCell}\n                      ></TableCell>\n                      <TableCell\n                        align='right'\n                        className={classes.depositButtonCell}\n                      ></TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {positions.map((position) => (\n                      <LiquidityPositionTableRow\n                        key={position.tokenId}\n                        {...{ position, history }}\n                      />\n                    ))}\n                  </TableBody>\n                </Table>\n              </Box>\n            )}\n          </>\n        )}\n      </Box>\n    </>\n  );\n};\n\nconst LiquidityPositionTableRow: FC<{\n  position: LiquidityPosition;\n  history: any;\n}> = ({ position, history }) => {\n  const classes = useStyles();\n  const { address } = useWallet();\n  const { token0Decimals } = useContracts();\n\n  const stake = useCallback(async () => {\n    history.push(`/stake/${position.tokenId}`);\n  }, [position.tokenId, history]);\n\n  const unstake = useCallback(async () => {\n    history.push(`/unstake/${position.tokenId}`);\n  }, [position.tokenId, history]);\n\n  const withdraw = useCallback(async () => {\n    history.push(`/withdraw/${position.tokenId}`);\n  }, [position.tokenId, history]);\n\n  return (\n    <TableRow>\n      <TableCell component='th' scope='row'>\n        {position.tokenId.toString()}\n      </TableCell>\n      <TableCell>\n        {!position.reward.isZero() ? (\n          <Box className='flex items-center'>\n            <Box mr={1}>{formatUnits(position.reward, token0Decimals)}</Box>\n            <Tooltip\n              title='Unstake position in order to claim accrued rewards.'\n              arrow\n              placement='top'\n            >\n              <Box className='flex items-center cursor'>\n                <InfoIcon fontSize='small' />\n              </Box>\n            </Tooltip>\n          </Box>\n        ) : (\n          '-'\n        )}\n      </TableCell>\n      <TableCell align='right' className={classes.depositButtonCell}>\n        <Button\n          color='secondary'\n          variant='contained'\n          onClick={position.staked ? unstake : stake}\n          className={classes.depositButton}\n        >\n          {position.staked ? 'Unstake' : 'Stake'}\n        </Button>\n      </TableCell>\n      <TableCell align='right' className={classes.depositButtonCell}>\n        <Button\n          color='secondary'\n          variant='contained'\n          onClick={withdraw}\n          className={classes.depositButton}\n          disabled={position.owner === address}\n        >\n          Withdraw\n        </Button>\n      </TableCell>\n    </TableRow>\n  );\n};\n\nconst ClaimAvailableReward: FC = () => {\n  const classes = useStyles();\n  const { stakingRewardsContract } = useContracts();\n  const {\n    currentIncentiveRewardTokenSymbol,\n    currentIncentiveRewardTokenDecimals,\n    currentIncentive,\n  } = useData();\n  const { address } = useWallet();\n  const { tx } = useNotifications();\n\n  const [reward, setReward] = useState(ethers.BigNumber.from(0));\n  const [isClaiming, setIsClaiming] = useState(false);\n\n  useEffect(() => {\n    if (!(stakingRewardsContract && currentIncentive && address)) return;\n\n    let isMounted = true;\n    const unsubs = [\n      () => {\n        isMounted = false;\n      },\n    ];\n\n    const load = async () => {\n      const reward = await stakingRewardsContract.rewards(\n        currentIncentive.key.rewardToken,\n        address\n      );\n      if (isMounted) setReward(reward);\n    };\n\n    const subscribe = () => {\n      const tokenUnstakedEvent = stakingRewardsContract.filters.TokenUnstaked();\n      stakingRewardsContract.on(tokenUnstakedEvent, load);\n      unsubs.push(() => {\n        stakingRewardsContract.off(tokenUnstakedEvent, load);\n      });\n\n      const rewardClaimedEvent = stakingRewardsContract.filters.RewardClaimed();\n      stakingRewardsContract.on(rewardClaimedEvent, load);\n      unsubs.push(() => {\n        stakingRewardsContract.off(rewardClaimedEvent, load);\n      });\n    };\n\n    load();\n    subscribe();\n\n    return () => {\n      unsubs.map((u) => u());\n    };\n  }, [stakingRewardsContract, currentIncentive, address]);\n\n  const claim = async () => {\n    if (!(stakingRewardsContract && currentIncentive)) return;\n\n    try {\n      setIsClaiming(true);\n      const reward = await stakingRewardsContract.rewards(\n        currentIncentive.key.rewardToken,\n        address\n      );\n      await tx('Claiming...', 'Claimed!', () =>\n        stakingRewardsContract.claimReward(\n          currentIncentive.key.rewardToken,\n          address,\n          reward\n        )\n      );\n    } catch (e) {\n      console.warn(e);\n    } finally {\n      setIsClaiming(false);\n    }\n  };\n\n  return (\n    <Box className='flex items-center'>\n      <Box mr={1}>REWARDS:</Box>{' '}\n      <Box mr={2}>\n        {formatUnits(reward, currentIncentiveRewardTokenDecimals)}{' '}\n        {currentIncentiveRewardTokenSymbol}\n      </Box>\n      <Button\n        color='secondary'\n        variant='contained'\n        onClick={claim}\n        className={classes.depositButton}\n        disabled={isClaiming || reward.isZero()}\n      >\n        {isClaiming ? 'Claiming...' : 'Claim'}\n      </Button>\n    </Box>\n  );\n};\n\nfunction formatTimestamp(unix: number) {\n  return moment.unix(unix).local().format('YYYY-MM-DD HHmm[h]');\n}\n\nexport default withRouter(Stake);\n"]},"metadata":{},"sourceType":"module"}