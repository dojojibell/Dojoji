{"ast":null,"code":"var _jsxFileName = \"/Users/ivopascoal/Desktop/MAXBID/src/pages/Mint.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { useCallback, useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { withRouter } from 'react-router-dom';\nimport * as ethers from 'ethers';\nimport { Box, Paper } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport InfoIcon from '@material-ui/icons/Info';\nimport moment from 'moment';\nimport bell from './bell.gif';\nimport { useWallet } from 'contexts/wallet';\nimport { useContracts } from 'contexts/contracts';\nimport { useNotifications } from 'contexts/notifications';\nimport { useData } from 'contexts/data';\nimport { formatUnits } from 'utils/big-number';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const useStyles = makeStyles(theme => ({\n  maxButton: {\n    height: 35\n  },\n  depositButtonCell: {\n    width: 110,\n    padding: 5\n  },\n  depositButton: {\n    width: 100\n  }\n}));\n\nconst Mint = ({\n  history\n}) => {\n  _s();\n\n  const classes = useStyles();\n  const {\n    nftManagerPositionsContract\n  } = useContracts();\n  const {\n    startConnecting: startConnectingWallet,\n    address\n  } = useWallet();\n  const {\n    token0Address,\n    token1Address,\n    token0Symbol,\n    token1Symbol\n  } = useContracts();\n  const {\n    positions,\n    currentIncentiveId,\n    incentives,\n    setCurrentIncentiveId\n  } = useData();\n\n  const isholder = async () => {\n    if (!nftManagerPositionsContract) return false;\n    const [balance] = await Promise.all([nftManagerPositionsContract.balanceof(address)]);\n    if (balance > 0) return true;else return false;\n  };\n\n  const mintBell = async () => {\n    if (!nftManagerPositionsContract) return;\n    const [minting] = await Promise.all([nftManagerPositionsContract.getApproved(address)]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '5rem',\n        color: '#332B1C'\n      },\n      children: \"The Tale begins\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '1.3rem',\n        marginLeft: '3%'\n      },\n      children: [\"The Bell of Dojoji is a tale that must be written on the Blockchain and live it's glory for the future generations!\", /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"A\", ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n          style: {\n            fontSize: '1.4rem',\n            color: '#332B1C'\n          },\n          children: \"trustless contract\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), ' ', \"has been deployed where each free mint will ring the Bell...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Upon reaching MaxSupply of 777 Bells the trading of\", ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n          style: {\n            fontSize: '1.4rem',\n            color: '#332B1C'\n          },\n          children: \"$DOJOJI\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), \" begins and its full glory shall be unleashed!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"The Original Ringers NFT holders will have tax privileges on the token and a few surprizes for the longrun\", ' ']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      m: 5,\n      style: {\n        width: '45%',\n        marginLeft: '43%'\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          p: 3,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            display: 'flex',\n            flexDirection: 'row',\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: bell,\n              alt: \"cloud\",\n              style: {\n                width: '83%',\n                marginLeft: '10%'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            color: \"secondary\",\n            variant: \"contained\",\n            onClick: mintBell,\n            className: classes.depositButton,\n            style: {\n              width: '83%',\n              marginLeft: '10%'\n            },\n            children: [\"Mint \", '&', \" Ring\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Mint, \"89j/GY5zp6omb71dOQiM+VDyI+Y=\", false, function () {\n  return [useStyles, useContracts, useWallet, useContracts, useData];\n});\n\n_c = Mint;\n\nconst LiquidityPositionTableRow = ({\n  position,\n  history\n}) => {\n  _s2();\n\n  const classes = useStyles();\n  const {\n    address\n  } = useWallet();\n  const {\n    token0Decimals\n  } = useContracts();\n  const stake = useCallback(async () => {\n    history.push(`/stake/${position.tokenId}`);\n  }, [position.tokenId, history]);\n  const unstake = useCallback(async () => {\n    history.push(`/unstake/${position.tokenId}`);\n  }, [position.tokenId, history]);\n  const withdraw = useCallback(async () => {\n    history.push(`/withdraw/${position.tokenId}`);\n  }, [position.tokenId, history]);\n  return /*#__PURE__*/_jsxDEV(TableRow, {\n    children: [/*#__PURE__*/_jsxDEV(TableCell, {\n      component: \"th\",\n      scope: \"row\",\n      children: position.tokenId.toString()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n      children: !position.reward.isZero() ? /*#__PURE__*/_jsxDEV(Box, {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          mr: 1,\n          children: formatUnits(position.reward, token0Decimals)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Unstake position in order to claim accrued rewards.\",\n          arrow: true,\n          placement: \"top\",\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            className: \"flex items-center cursor\",\n            children: /*#__PURE__*/_jsxDEV(InfoIcon, {\n              fontSize: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }, this) : '-'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n      align: \"right\",\n      className: classes.depositButtonCell,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        color: \"secondary\",\n        variant: \"contained\",\n        onClick: position.staked ? unstake : stake,\n        className: classes.depositButton,\n        children: position.staked ? 'Unstake' : 'Stake'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n      align: \"right\",\n      className: classes.depositButtonCell,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        color: \"secondary\",\n        variant: \"contained\",\n        onClick: withdraw,\n        className: classes.depositButton,\n        disabled: position.owner === address,\n        children: \"Withdraw\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(LiquidityPositionTableRow, \"Q4AFFI9+QBuVJ81Hx0ebnmw5Vcs=\", false, function () {\n  return [useStyles, useWallet, useContracts];\n});\n\n_c2 = LiquidityPositionTableRow;\n\nconst ClaimAvailableReward = () => {\n  _s3();\n\n  const classes = useStyles();\n  const {\n    stakingRewardsContract\n  } = useContracts();\n  const {\n    currentIncentiveRewardTokenSymbol,\n    currentIncentiveRewardTokenDecimals,\n    currentIncentive\n  } = useData();\n  const {\n    address\n  } = useWallet();\n  const {\n    tx\n  } = useNotifications();\n  const [reward, setReward] = useState(ethers.BigNumber.from(0));\n  const [isClaiming, setIsClaiming] = useState(false);\n  useEffect(() => {\n    if (!(stakingRewardsContract && currentIncentive && address)) return;\n    let isMounted = true;\n    const unsubs = [() => {\n      isMounted = false;\n    }];\n\n    const load = async () => {\n      const reward = await stakingRewardsContract.rewards(currentIncentive.key.rewardToken, address);\n      if (isMounted) setReward(reward);\n    };\n\n    const subscribe = () => {\n      const tokenUnstakedEvent = stakingRewardsContract.filters.TokenUnstaked();\n      stakingRewardsContract.on(tokenUnstakedEvent, load);\n      unsubs.push(() => {\n        stakingRewardsContract.off(tokenUnstakedEvent, load);\n      });\n      const rewardClaimedEvent = stakingRewardsContract.filters.RewardClaimed();\n      stakingRewardsContract.on(rewardClaimedEvent, load);\n      unsubs.push(() => {\n        stakingRewardsContract.off(rewardClaimedEvent, load);\n      });\n    };\n\n    load();\n    subscribe();\n    return () => {\n      unsubs.map(u => u());\n    };\n  }, [stakingRewardsContract, currentIncentive, address]);\n\n  const claim = async () => {\n    if (!(stakingRewardsContract && currentIncentive)) return;\n\n    try {\n      setIsClaiming(true);\n      const reward = await stakingRewardsContract.rewards(currentIncentive.key.rewardToken, address);\n      await tx('Claiming...', 'Claimed!', () => stakingRewardsContract.claimReward(currentIncentive.key.rewardToken, address, reward));\n    } catch (e) {\n      console.warn(e);\n    } finally {\n      setIsClaiming(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    className: \"flex items-center\",\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      mr: 1,\n      children: \"REWARDS:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this), ' ', /*#__PURE__*/_jsxDEV(Box, {\n      mr: 2,\n      children: [formatUnits(reward, currentIncentiveRewardTokenDecimals), ' ', currentIncentiveRewardTokenSymbol]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      color: \"secondary\",\n      variant: \"contained\",\n      onClick: claim,\n      className: classes.depositButton,\n      disabled: isClaiming || reward.isZero(),\n      children: isClaiming ? 'Claiming...' : 'Claim'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 269,\n    columnNumber: 5\n  }, this);\n};\n\n_s3(ClaimAvailableReward, \"3YuDU+3wHqHFn2340Xr3OCqN1WI=\", false, function () {\n  return [useStyles, useContracts, useData, useWallet, useNotifications];\n});\n\n_c3 = ClaimAvailableReward;\n\nfunction formatTimestamp(unix) {\n  return moment.unix(unix).local().format('YYYY-MM-DD HHmm[h]');\n}\n\nexport default _c4 = withRouter(Mint);\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Mint\");\n$RefreshReg$(_c2, \"LiquidityPositionTableRow\");\n$RefreshReg$(_c3, \"ClaimAvailableReward\");\n$RefreshReg$(_c4, \"%default%\");","map":{"version":3,"sources":["/Users/ivopascoal/Desktop/MAXBID/src/pages/Mint.tsx"],"names":["useCallback","useState","useEffect","makeStyles","withRouter","ethers","Box","Paper","Button","TableRow","TableCell","Tooltip","InfoIcon","moment","bell","useWallet","useContracts","useNotifications","useData","formatUnits","useStyles","theme","maxButton","height","depositButtonCell","width","padding","depositButton","Mint","history","classes","nftManagerPositionsContract","startConnecting","startConnectingWallet","address","token0Address","token1Address","token0Symbol","token1Symbol","positions","currentIncentiveId","incentives","setCurrentIncentiveId","isholder","balance","Promise","all","balanceof","mintBell","minting","getApproved","fontSize","color","marginLeft","LiquidityPositionTableRow","position","token0Decimals","stake","push","tokenId","unstake","withdraw","toString","reward","isZero","staked","owner","ClaimAvailableReward","stakingRewardsContract","currentIncentiveRewardTokenSymbol","currentIncentiveRewardTokenDecimals","currentIncentive","tx","setReward","BigNumber","from","isClaiming","setIsClaiming","isMounted","unsubs","load","rewards","key","rewardToken","subscribe","tokenUnstakedEvent","filters","TokenUnstaked","on","off","rewardClaimedEvent","RewardClaimed","map","u","claim","claimReward","e","console","warn","formatTimestamp","unix","local","format"],"mappings":"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","sourcesContent":["import { FC, useCallback, useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { withRouter } from 'react-router-dom';\nimport * as ethers from 'ethers';\nimport { Box, Paper } from '@material-ui/core';\nimport { positions } from '@material-ui/system';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Table from '@material-ui/core/Table';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport InfoIcon from '@material-ui/icons/Info';\nimport moment from 'moment';\nimport dragon from './dragon.png';\nimport bell from './bell.gif';\nimport { useWallet } from 'contexts/wallet';\nimport { useContracts } from 'contexts/contracts';\nimport { useNotifications } from 'contexts/notifications';\nimport { useData } from 'contexts/data';\nimport { LiquidityPosition } from 'utils/types';\nimport { formatUnits } from 'utils/big-number';\n\nexport const useStyles = makeStyles((theme) => ({\n  maxButton: {\n    height: 35,\n  },\n  depositButtonCell: {\n    width: 110,\n    padding: 5,\n  },\n  depositButton: {\n    width: 100,\n  },\n}));\n\nconst Mint: FC<{ history: any }> = ({ history }) => {\n  const classes = useStyles();\n  const { nftManagerPositionsContract } = useContracts();\n  const { startConnecting: startConnectingWallet, address } = useWallet();\n  const {\n    token0Address,\n    token1Address,\n    token0Symbol,\n    token1Symbol,\n  } = useContracts();\n  const {\n    positions,\n    currentIncentiveId,\n    incentives,\n    setCurrentIncentiveId,\n  } = useData();\n\n  const isholder = async () => {\n    if (!nftManagerPositionsContract) return false;\n    const [balance] = await Promise.all([\n      nftManagerPositionsContract.balanceof(address),\n    ]);\n    if (balance > 0) return true;\n    else return false;\n  };\n  const mintBell = async () => {\n    if (!nftManagerPositionsContract) return;\n    const [minting] = await Promise.all([\n      nftManagerPositionsContract.getApproved(address),\n    ]);\n  };\n  return (\n    <>\n      <div style={{ fontSize: '5rem', color: '#332B1C' }}>The Tale begins</div>\n      <div style={{ fontSize: '1.3rem', marginLeft: '3%' }}>\n        The Bell of Dojoji is a tale that must be written on the Blockchain and\n        live it's glory for the future generations!\n        <p>\n          A{' '}\n          <a style={{ fontSize: '1.4rem', color: '#332B1C' }}>\n            trustless contract\n          </a>{' '}\n          has been deployed where each free mint will ring the Bell...\n        </p>\n        <p>\n          Upon reaching MaxSupply of 777 Bells the trading of{' '}\n          <a style={{ fontSize: '1.4rem', color: '#332B1C' }}>$DOJOJI</a> begins\n          and its full glory shall be unleashed!\n        </p>\n        <p>\n          The Original Ringers NFT holders will have tax privileges on the token\n          and a few surprizes for the longrun{' '}\n        </p>\n      </div>\n      <Box m={5} style={{ width: '45%', marginLeft: '43%' }}>\n        <Paper>\n          <Box p={3}>\n            <Box display={'flex'} flexDirection={'row'}>\n              <img\n                src={bell}\n                alt='cloud'\n                style={{ width: '83%', marginLeft: '10%' }}\n              />\n            </Box>\n            <Button\n              color='secondary'\n              variant='contained'\n              onClick={mintBell}\n              className={classes.depositButton}\n              style={{ width: '83%', marginLeft: '10%' }}\n            >\n              Mint {'&'} Ring\n            </Button>\n          </Box>\n        </Paper>\n      </Box>\n    </>\n  );\n};\n\nconst LiquidityPositionTableRow: FC<{\n  position: LiquidityPosition;\n  history: any;\n}> = ({ position, history }) => {\n  const classes = useStyles();\n  const { address } = useWallet();\n  const { token0Decimals } = useContracts();\n\n  const stake = useCallback(async () => {\n    history.push(`/stake/${position.tokenId}`);\n  }, [position.tokenId, history]);\n\n  const unstake = useCallback(async () => {\n    history.push(`/unstake/${position.tokenId}`);\n  }, [position.tokenId, history]);\n\n  const withdraw = useCallback(async () => {\n    history.push(`/withdraw/${position.tokenId}`);\n  }, [position.tokenId, history]);\n\n  return (\n    <TableRow>\n      <TableCell component='th' scope='row'>\n        {position.tokenId.toString()}\n      </TableCell>\n      <TableCell>\n        {!position.reward.isZero() ? (\n          <Box className='flex items-center'>\n            <Box mr={1}>{formatUnits(position.reward, token0Decimals)}</Box>\n            <Tooltip\n              title='Unstake position in order to claim accrued rewards.'\n              arrow\n              placement='top'\n            >\n              <Box className='flex items-center cursor'>\n                <InfoIcon fontSize='small' />\n              </Box>\n            </Tooltip>\n          </Box>\n        ) : (\n          '-'\n        )}\n      </TableCell>\n      <TableCell align='right' className={classes.depositButtonCell}>\n        <Button\n          color='secondary'\n          variant='contained'\n          onClick={position.staked ? unstake : stake}\n          className={classes.depositButton}\n        >\n          {position.staked ? 'Unstake' : 'Stake'}\n        </Button>\n      </TableCell>\n      <TableCell align='right' className={classes.depositButtonCell}>\n        <Button\n          color='secondary'\n          variant='contained'\n          onClick={withdraw}\n          className={classes.depositButton}\n          disabled={position.owner === address}\n        >\n          Withdraw\n        </Button>\n      </TableCell>\n    </TableRow>\n  );\n};\n\nconst ClaimAvailableReward: FC = () => {\n  const classes = useStyles();\n  const { stakingRewardsContract } = useContracts();\n  const {\n    currentIncentiveRewardTokenSymbol,\n    currentIncentiveRewardTokenDecimals,\n    currentIncentive,\n  } = useData();\n  const { address } = useWallet();\n  const { tx } = useNotifications();\n\n  const [reward, setReward] = useState(ethers.BigNumber.from(0));\n  const [isClaiming, setIsClaiming] = useState(false);\n\n  useEffect(() => {\n    if (!(stakingRewardsContract && currentIncentive && address)) return;\n\n    let isMounted = true;\n    const unsubs = [\n      () => {\n        isMounted = false;\n      },\n    ];\n\n    const load = async () => {\n      const reward = await stakingRewardsContract.rewards(\n        currentIncentive.key.rewardToken,\n        address\n      );\n      if (isMounted) setReward(reward);\n    };\n\n    const subscribe = () => {\n      const tokenUnstakedEvent = stakingRewardsContract.filters.TokenUnstaked();\n      stakingRewardsContract.on(tokenUnstakedEvent, load);\n      unsubs.push(() => {\n        stakingRewardsContract.off(tokenUnstakedEvent, load);\n      });\n\n      const rewardClaimedEvent = stakingRewardsContract.filters.RewardClaimed();\n      stakingRewardsContract.on(rewardClaimedEvent, load);\n      unsubs.push(() => {\n        stakingRewardsContract.off(rewardClaimedEvent, load);\n      });\n    };\n\n    load();\n    subscribe();\n\n    return () => {\n      unsubs.map((u) => u());\n    };\n  }, [stakingRewardsContract, currentIncentive, address]);\n\n  const claim = async () => {\n    if (!(stakingRewardsContract && currentIncentive)) return;\n\n    try {\n      setIsClaiming(true);\n      const reward = await stakingRewardsContract.rewards(\n        currentIncentive.key.rewardToken,\n        address\n      );\n      await tx('Claiming...', 'Claimed!', () =>\n        stakingRewardsContract.claimReward(\n          currentIncentive.key.rewardToken,\n          address,\n          reward\n        )\n      );\n    } catch (e) {\n      console.warn(e);\n    } finally {\n      setIsClaiming(false);\n    }\n  };\n\n  return (\n    <Box className='flex items-center'>\n      <Box mr={1}>REWARDS:</Box>{' '}\n      <Box mr={2}>\n        {formatUnits(reward, currentIncentiveRewardTokenDecimals)}{' '}\n        {currentIncentiveRewardTokenSymbol}\n      </Box>\n      <Button\n        color='secondary'\n        variant='contained'\n        onClick={claim}\n        className={classes.depositButton}\n        disabled={isClaiming || reward.isZero()}\n      >\n        {isClaiming ? 'Claiming...' : 'Claim'}\n      </Button>\n    </Box>\n  );\n};\n\nfunction formatTimestamp(unix: number) {\n  return moment.unix(unix).local().format('YYYY-MM-DD HHmm[h]');\n}\n\nexport default withRouter(Mint);\n"]},"metadata":{},"sourceType":"module"}